<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Poke Quiz</title>
  <link rel="stylesheet" type="text/css" href="../CSS/HomePage_CSS/General_css.css">
  <link rel="stylesheet" type="text/css" href="../CSS/HomePage_CSS/PokeQuiz_css.css">
  <link rel="icon" type="image/png" href="../IMG/HomePage_Images/icon.png">
</head>

<body class="body">
  <header class="header">
  <picture>
    <source media="(min-width: 900px)" srcset="../IMG/HomePage_Images/header-lg.png">
    <source media="(min-width: 620px)" srcset="../IMG/HomePage_Images/header-md.png">
    <img src="../IMG/HomePage_Images/header-sm.png" alt="Pokemon banner">
  </picture>
</header>
  <%
  const displayName = (typeof user !== 'undefined' && user && user.username)
    ? user.username
    : (username || 'Trainer');
%>
<nav class="main-menu grid-container" role="navigation" aria-label="Main menu">
  <!-- Same navbar component we reuse across all main pages -->
  <ul class="main-menu-list">
    <li class="main-menu-item"><a href="/" class="main-menu-heading" title="Home Page">Home Page</a></li>
    <li class="main-menu-item"><a href="/Pokedex" class="main-menu-heading" title="Pokedex">Pokedex</a></li>
    <li class="main-menu-item"><a href="/Anime" class="main-menu-heading" title="Anime Series">Anime Series</a></li>
    <li class="main-menu-item"><a href="/Games" class="main-menu-heading" title="Games">Games</a></li>
    <% if (isLoggedIn) { %>
      <li class="main-menu-item"><a href="/Add" class="main-menu-heading" title="Add Content">Add Content</a></li>
    <% } else { %>
      <li class="main-menu-item"><span class="main-menu-heading disabled-link-wrapper" data-tooltip="You must log in to add content" aria-disabled="true">Add Content</span></li>
    <% } %>

    <% if (!isLoggedIn) { %>
      <li class="main-menu-item"><a href="/Add" class="main-menu-heading" title="Login">Login</a></li>
    <% } else { %>
      <li class="main-menu-item nav-profile-container">
        <button type="button" class="main-menu-heading profile-avatar" aria-label="Profile menu" aria-haspopup="true" aria-expanded="false"></button>
        <ul class="main-menu-sub profile-dropdown">
          <li class="dropdown-greeting">Hello, <span class="dropdown-username"><%= displayName %></span>!</li>
          <li><a href="/Profile" class="dropdown-profile-link">View Profile</a></li>
          <li>
            <form method="post" action="/logout">
              <button type="submit" class="dropdown-logout">Logout</button>
            </form>
          </li>
        </ul>
      </li>
    <% } %>
  </ul>
</nav>

  <div class="main-size">
    <div class="content">
      <main class="main">
        <div class="container">
          <section class="card">
            <h1>Pokemon Trivia Quiz</h1>
            <p class="subtitle">Answer all 5 questions correctly to receive a one-time use discount code in your email!</p>
            <!-- The JS file reads this submit URL and posts the form there -->
            <form id="pokeQuizForm" data-submit-url="<%= phpSaveUrl %>" autocomplete="off">
              <fieldset>
                <legend>1) Which Pokemon is known as the Electric Mouse Pokemon?</legend>
                <div class="options">
                  <label class="option-row"><input type="radio" name="q1" value="A" required> A) Eevee</label>
                  <label class="option-row"><input type="radio" name="q1" value="B"> B) Pikachu</label>
                  <label class="option-row"><input type="radio" name="q1" value="C"> C) Charmander</label>
                  <label class="option-row"><input type="radio" name="q1" value="D"> D) Squirtle</label>
                </div>
              </fieldset>

              <fieldset>
                <legend>2) Which type is strong against Water-type Pokemon?</legend>
                <div class="options">
                  <label class="option-row"><input type="radio" name="q2" value="A" required> A) Fire</label>
                  <label class="option-row"><input type="radio" name="q2" value="B"> B) Rock</label>
                  <label class="option-row"><input type="radio" name="q2" value="C"> C) Grass</label>
                  <label class="option-row"><input type="radio" name="q2" value="D"> D) Dragon</label>
                </div>
              </fieldset>

              <fieldset>
                <legend>3) What item is used to catch wild Pokemon?</legend>
                <div class="options">
                  <label class="option-row"><input type="radio" name="q3" value="A" required> A) Rare Candy</label>
                  <label class="option-row"><input type="radio" name="q3" value="B"> B) Poke Ball</label>
                  <label class="option-row"><input type="radio" name="q3" value="C"> C) Moon Stone</label>
                  <label class="option-row"><input type="radio" name="q3" value="D"> D) Escape Rope</label>
                </div>
              </fieldset>

              <fieldset>
                <legend>4) Which Pokemon is #001 in the National Pokedex?</legend>
                <div class="options">
                  <label class="option-row"><input type="radio" name="q4" value="A" required> A) Bulbasaur</label>
                  <label class="option-row"><input type="radio" name="q4" value="B"> B) Mew</label>
                  <label class="option-row"><input type="radio" name="q4" value="C"> C) Snorlax</label>
                  <label class="option-row"><input type="radio" name="q4" value="D"> D) Rattata</label>
                </div>
              </fieldset>

              <fieldset>
                <legend>5) Which region is the setting for Pokemon Red and Blue?</legend>
                <div class="options">
                  <label class="option-row"><input type="radio" name="q5" value="A" required> A) Hoenn</label>
                  <label class="option-row"><input type="radio" name="q5" value="B"> B) Johto</label>
                  <label class="option-row"><input type="radio" name="q5" value="C"> C) Sinnoh</label>
                  <label class="option-row"><input type="radio" name="q5" value="D"> D) Kanto</label>
                </div>
              </fieldset>

              <h2 class="form-section-title">Your Details</h2>

              <div class="form-grid">
                <div>
                  <label for="name">Name</label>
                  <input id="name" name="name" type="text" pattern="[A-Za-z ]+" title="Name can contain letters only" autocomplete="off" required />
                </div>

                <div>
                  <label for="email">Email</label>
                  <input id="email" name="email" type="email" autocomplete="off" required />
                </div>

                <div>
                  <label for="phone">Phone Number</label>
                  <input id="phone" name="phone" type="tel" pattern="0[0-9]{8,9}" maxlength="10" inputmode="numeric" title="Phone must start with 0 and be 9-10 digits" autocomplete="off" required />
                </div>

                <div>
                  <label for="age">Age</label>
                  <input id="age" name="age" type="number" min="10" max="120" autocomplete="off" required />
                </div>

                <div style="grid-column: 1 / -1;">
                  <label for="pokemon-years">How long have you been into Pokemon?</label>
                  <select id="pokemon-years" name="pokemon_years" required>
                    <option value="" selected disabled>Select an option</option>
                    <option value="Less than 1 year">Less than 1 year</option>
                    <option value="1-3 years">1-3 years</option>
                    <option value="4-7 years">4-7 years</option>
                    <option value="8+ years">8+ years</option>
                  </select>
                </div>
              </div>

              <label class="consent-row">
                <input type="checkbox" id="consent" name="consent" required />
                <span>I consent to use my data for newsletters.</span>
              </label>

              <button class="submit-btn" type="submit">Submit</button>
            </form>
          </section>
        </div>
      </main>
    </div>
  </div>

  <!-- This modal opens after submit and shows the final score -->
  <div class="modal-overlay" id="resultModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="resultTitle">
      <button type="button" class="modal-close" id="modalCloseBtn" aria-label="Close">&times;</button>
      <h2 id="resultTitle">Quiz Submitted!</h2>
      <p class="modal-note" id="discountMessage">Your discount code has been sent to your email! (Valid for one-time use only)</p>
      <p class="score-text" id="scoreText">0/5</p>
    </div>
  </div>

  <footer class="footer">
  <p>Pokemon project 2025 - Vitaly, Liad and Ido</p>
</footer>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="../JQuery/jquery-features.js"></script>
  <script src="../JQuery/navbar-profile.js"></script>
  <script src="../JavaScript/poke_quiz.js"></script>
</body>

</html>

